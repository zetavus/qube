// circuit_builder.qyt
// QyTum ì–‘ì íšŒë¡œ ë¹Œë” DSL ê³ ê¸‰ í…ŒìŠ¤íŠ¸

// ë²¨ ìƒíƒœ ìƒì„± íšŒë¡œ ì •ì˜
circuit Bell(2) {
    apply H to q0;
    apply CNOT to (q0, q1);
}

// 3íë¹— GHZ ìƒíƒœ íšŒë¡œ ì •ì˜  
circuit GHZ(3) {
    apply H to q0;
    apply CNOT to (q0, q1);
    apply CNOT to (q1, q2);
}

fn test_circuit_definition() {
    println("=== íšŒë¡œ ì •ì˜ í…ŒìŠ¤íŠ¸ ===");
    
    // ì‚¬ì „ ì •ì˜ëœ íšŒë¡œ ì‚¬ìš©
    println("ë²¨ ìƒíƒœ íšŒë¡œ ìƒì„± ì¤‘...");
    scalar bell_circuit = Bell(2);
    println("ë²¨ íšŒë¡œ ìƒì„± ì™„ë£Œ");
    
    println("GHZ ìƒíƒœ íšŒë¡œ ìƒì„± ì¤‘...");
    scalar ghz_circuit = GHZ(3);
    println("GHZ íšŒë¡œ ìƒì„± ì™„ë£Œ");
    
    println("íšŒë¡œ ì •ì˜ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n");
}

fn test_apply_gates() {
    println("=== apply ë¬¸ í…ŒìŠ¤íŠ¸ ===");
    
    // 1íë¹— íšŒë¡œë¡œ ê²Œì´íŠ¸ ì ìš© í…ŒìŠ¤íŠ¸
    scalar circuit = Circuit(1);
    
    println("í•˜ë‹¤ë§ˆë“œ ê²Œì´íŠ¸ ì ìš©...");
    // apply H to q0;  // ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”
    
    println("X ê²Œì´íŠ¸ ì ìš©...");
    // apply X to q0;  // ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”
    
    println("íšŒì „ ê²Œì´íŠ¸ ì ìš©...");
    // apply RX(3.14159/2) to q0;  // ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”
    
    println("apply ë¬¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n");
}

fn test_multi_qubit_gates() {
    println("=== ë‹¤ì¤‘ íë¹— ê²Œì´íŠ¸ í…ŒìŠ¤íŠ¸ ===");
    
    // 2íë¹— íšŒë¡œ ìƒì„±
    scalar circuit = Circuit(2);
    
    println("2íë¹— íšŒë¡œ ìƒì„± ì™„ë£Œ");
    
    // ë‹¤ì¤‘ íë¹— ê²Œì´íŠ¸ ì ìš©
    println("CNOT ê²Œì´íŠ¸ ì ìš©...");
    // apply CNOT to (q0, q1);  // ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”
    
    println("CZ ê²Œì´íŠ¸ ì ìš©...");
    // apply CZ to (q0, q1);  // ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”
    
    println("ë‹¤ì¤‘ íë¹— ê²Œì´íŠ¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n");
}

fn test_parameterized_gates() {
    println("=== ë§¤ê°œë³€ìˆ˜ ê²Œì´íŠ¸ í…ŒìŠ¤íŠ¸ ===");
    
    scalar circuit = Circuit(1);
    scalar PI = 3.14159;
    
    println("íšŒì „ ê°ë„ë“¤:");
    scalar angle1 = PI / 2;
    scalar angle2 = PI / 4;
    scalar angle3 = PI / 3;
    
    println("angle1 = Ï€/2 = {}", angle1);
    println("angle2 = Ï€/4 = {}", angle2);
    println("angle3 = Ï€/3 = {}", angle3);
    
    // ë§¤ê°œë³€ìˆ˜ íšŒì „ ê²Œì´íŠ¸ë“¤
    println("RX ê²Œì´íŠ¸ ì ìš©...");
    // apply RX(angle1) to q0;  // ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”
    
    println("RY ê²Œì´íŠ¸ ì ìš©...");
    // apply RY(angle2) to q0;  // ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”
    
    println("RZ ê²Œì´íŠ¸ ì ìš©...");
    // apply RZ(angle3) to q0;  // ì‹¤ì œ êµ¬í˜„ì—ì„œ í™œì„±í™”
    
    println("ë§¤ê°œë³€ìˆ˜ ê²Œì´íŠ¸ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n");
}

fn test_measurement() {
    println("=== ì¸¡ì • í…ŒìŠ¤íŠ¸ ===");
    
    // ì¸¡ì • ì‹œë®¬ë ˆì´ì…˜
    scalar q0 = |0âŸ©;
    scalar q1 = |+âŸ©;  // ì¤‘ì²© ìƒíƒœ
    
    println("ì¸¡ì • ì „ ìƒíƒœ:");
    println("q0 = {}", q0);
    println("q1 = {}", q1);
    
    // ì¸¡ì • ìˆ˜í–‰ (ì‹œë®¬ë ˆì´ì…˜)
    println("q0 ì¸¡ì • ì¤‘...");
    scalar result0 = measure(q0);
    println("q0 ì¸¡ì • ê²°ê³¼: {}", result0);
    
    println("q1 ì¸¡ì • ì¤‘... (í™•ë¥ ì )");
    scalar result1 = measure(q1);
    println("q1 ì¸¡ì • ê²°ê³¼: {}", result1);
    
    println("ì¸¡ì • í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n");
}

fn test_complex_circuit() {
    println("=== ë³µí•© íšŒë¡œ í…ŒìŠ¤íŠ¸ ===");
    
    // 4íë¹— ë³µí•© íšŒë¡œ
    scalar circuit = Circuit(4);
    
    println("4íë¹— íšŒë¡œ ìƒì„±");
    println("ë³µí•© ê²Œì´íŠ¸ ì‹œí€€ìŠ¤ ì ìš© ì˜ˆì •:");
    println("1. H â†’ q0, q1");
    println("2. CNOT â†’ (q0,q2), (q1,q3)");
    println("3. RZ(Ï€/2) â†’ q2");
    println("4. CNOT â†’ (q2,q3)");
    println("5. H â†’ q0, q1");
    
    // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ì•„ë˜ ì½”ë“œë“¤ì´ í™œì„±í™”ë¨
    /*
    apply H to q0;
    apply H to q1;
    apply CNOT to (q0, q2);
    apply CNOT to (q1, q3);
    apply RZ(3.14159/2) to q2;
    apply CNOT to (q2, q3);
    apply H to q0;
    apply H to q1;
    */
    
    println("ë³µí•© íšŒë¡œ êµ¬ì„± ì™„ë£Œ");
    println("ë³µí•© íšŒë¡œ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!\n");
}

fn main() {
    println("ğŸŒŸ QyTum ì–‘ì íšŒë¡œ ë¹Œë” ê³ ê¸‰ í…ŒìŠ¤íŠ¸");
    println("=====================================\n");
    
    test_circuit_definition();
    test_apply_gates();
    test_multi_qubit_gates();
    test_parameterized_gates();
    test_measurement();
    test_complex_circuit();
    
    println("ğŸ‰ ëª¨ë“  íšŒë¡œ ë¹Œë” í…ŒìŠ¤íŠ¸ ì™„ë£Œ!");
    println("ì‹¤ì œ apply ë¬¸ë“¤ì€ QyTum ì¸í„°í”„ë¦¬í„°ì—ì„œ í™œì„±í™”ë©ë‹ˆë‹¤.");
}