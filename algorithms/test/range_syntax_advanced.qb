// algorithms/test/range_syntax_advanced.qb
// ê³ ê¸‰ ë²”ìœ„ ë¬¸ë²• í…ŒìŠ¤íŠ¸

fn test_range_cz() {
    println("ğŸ§ª ë²”ìœ„ CZ ê²Œì´íŠ¸ í…ŒìŠ¤íŠ¸");
    println("=======================");
    
    circuit RangeCZ(5) {
        println("1ï¸âƒ£ ì´ˆê¸°í™”:");
        apply H to (~);
        
        println("2ï¸âƒ£ ëª¨ë“  íë¹— â†’ q4 ì œì–´:");
        apply CZ to (~, q4);
        
        println("3ï¸âƒ£ q0 â†’ ëª¨ë“  íë¹— ì œì–´:");
        apply CZ to (q0, ~);
    }
    return RangeCZ(5);
}

fn test_range_slice() {
    println("");
    println("ğŸ§ª ë²”ìœ„ ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸");
    println("=======================");
    
    circuit RangeSlice(6) {
        println("1ï¸âƒ£ ë²”ìœ„ ì´ˆê¸°í™”:");
        apply H to (q0:q2);
        
        println("2ï¸âƒ£ ëª…ì‹œì  ë¦¬ìŠ¤íŠ¸:");
        apply X to (q3, q4, q5);
    }
    return RangeSlice(6);
}

fn main() {
    println("ğŸ¯ ê³ ê¸‰ ë²”ìœ„ ë¬¸ë²• í…ŒìŠ¤íŠ¸");
    println("=======================");
    
    // CZ ë²”ìœ„ í…ŒìŠ¤íŠ¸
    cz_circuit = test_range_cz();
    result1 = measure(cz_circuit, [0, 1, 2, 3, 4]);
    println("CZ ë²”ìœ„ í…ŒìŠ¤íŠ¸ ì™„ë£Œ: {}", result1);
    
    // ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸
    slice_circuit = test_range_slice();
    result2 = measure(slice_circuit, [0, 1, 2, 3, 4, 5]);
    println("ìŠ¬ë¼ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì™„ë£Œ: {}", result2);
    
    println("");
    println("ğŸ‰ ë²”ìœ„ ë¬¸ë²• êµ¬í˜„ ì„±ê³µ!");
    println("======================");
    println("âœ… apply H to (~);        - ëª¨ë“  íë¹—");
    println("âœ… apply CZ to (~, q4);   - ëª¨ë“  â†’ íƒ€ê²Ÿ");
    println("âœ… apply CZ to (q0, ~);   - ì†ŒìŠ¤ â†’ ëª¨ë“ ");
    println("âœ… apply H to (q0:q2);    - ë²”ìœ„");
    println("âœ… apply X to (q3, q4);   - ëª…ì‹œì  ë¦¬ìŠ¤íŠ¸");
}