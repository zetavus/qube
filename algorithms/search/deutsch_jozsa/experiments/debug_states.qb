// Deutsch-Jozsa ë‹¨ê³„ë³„ ìƒíƒœ ë””ë²„ê¹…

fn debug_step_by_step() {
    println("ğŸ” Deutsch-Jozsa ë‹¨ê³„ë³„ ë””ë²„ê¹…");
    println("===============================");
    
    println("=== 1ë‹¨ê³„: ê¸°ë³¸ ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸ ===");
    circuit Step1(2) {
        apply X to q1;
    }
    step1 = Step1(2);
    result1 = measure(step1, [0, 1]);
    println("ì´ˆê¸°í™” í›„: {}", result1);
    println("ì˜ˆìƒ: [0, 1] - |01âŸ© ìƒíƒœ");
    println("");
    
    println("=== 2ë‹¨ê³„: í•˜ë‹¤ë§ˆë“œ ì ìš© í…ŒìŠ¤íŠ¸ ===");
    circuit Step2(2) {
        apply X to q1;
        apply H to ~;
    }
    step2 = Step2(2);
    result2 = measure(step2, [0, 1]);
    println("í•˜ë‹¤ë§ˆë“œ í›„: {}", result2);
    println("ì˜ˆìƒ: 50/50 í™•ë¥  ë¶„í¬");
    println("");
    
    println("=== 3ë‹¨ê³„: CNOT ì—†ì´ ìµœì¢… H ===");
    circuit Step3(2) {
        apply X to q1;
        apply H to ~;
        apply H to q0;
    }
    step3 = Step3(2);
    result3 = measure(step3, [0]);
    println("CNOT ì—†ì´ ìµœì¢…: {}", result3);
    println("ì˜ˆìƒ: [0] - ìƒìˆ˜í•¨ìˆ˜ì™€ ê°™ìŒ");
    println("");
    
    println("=== 4ë‹¨ê³„: CNOT í¬í•¨ ì™„ì „ íšŒë¡œ ===");
    circuit Step4(2) {
        apply X to q1;
        apply H to ~;
        apply CNOT to (q0, q1);
        apply H to q0;
    }
    step4 = Step4(2);
    result4 = measure(step4, [0]);
    println("CNOT í¬í•¨ ìµœì¢…: {}", result4);
    println("ì˜ˆìƒ: [1] - ê· í˜•í•¨ìˆ˜");
    println("");
}

fn test_direct_implementation() {
    println("ğŸ§ª ì§ì ‘ êµ¬í˜„ í…ŒìŠ¤íŠ¸");
    println("===================");
    
    println("í…ŒìŠ¤íŠ¸ A: ìƒìˆ˜í•¨ìˆ˜ ì§ì ‘ êµ¬í˜„");
    circuit DirectConstant(2) {
        apply X to q1;
        apply H to q0;
        apply H to q1;
        apply H to q0;
    }
    
    direct1 = DirectConstant(2);
    result_a = measure(direct1, [0]);
    println("ì§ì ‘ ìƒìˆ˜í•¨ìˆ˜: {}", result_a);
    println("");
    
    println("í…ŒìŠ¤íŠ¸ B: ê· í˜•í•¨ìˆ˜ ì§ì ‘ êµ¬í˜„");
    circuit DirectBalanced(2) {
        apply X to q1;
        apply H to q0;
        apply H to q1;
        apply CNOT to (q0, q1);
        apply H to q0;
    }
    
    direct2 = DirectBalanced(2);
    result_b = measure(direct2, [0]);
    println("ì§ì ‘ ê· í˜•í•¨ìˆ˜: {}", result_b);
    println("");
}

fn main() {
    println("ğŸ” Deutsch-Jozsa ë””ë²„ê¹… ì„¸ì…˜");
    println("============================");
    
    debug_step_by_step();
    test_direct_implementation();
    
    println("ğŸ”§ ë¶„ì„ í¬ì¸íŠ¸:");
    println("- ë‹¨ê³„ë³„ ìƒíƒœ ë³€í™” í™•ì¸");
    println("- CNOT ê²Œì´íŠ¸ íš¨ê³¼ í™•ì¸");
    println("- í•¨ìˆ˜ í˜¸ì¶œ vs ì§ì ‘ êµ¬í˜„ ë¹„êµ");
}