// algorithms/search/grover_no_loop.qb
// while ë£¨í”„ ì—†ì´ 4íšŒ ë°˜ë³µ ì§ì ‘ êµ¬í˜„

fn create_grover_no_loop() {
    circuit GroverNoLoop(5) {
        println("ğŸ”§ ë£¨í”„ ì—†ëŠ” Grover 4íšŒ ë°˜ë³µ");
        println("=============================");
        
        // ì´ˆê¸°í™”
        apply H to ~;
        println("ì´ˆê¸°í™” ì™„ë£Œ");
        
        // 1íšŒì°¨
        println("1íšŒì°¨ ì‹œì‘:");
        apply X to q1;
        apply X to q3;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to q1;
        apply X to q3;
        apply H to ~;
        apply X to ~;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to ~;
        apply H to ~;
        println("1íšŒì°¨ ì™„ë£Œ");
        
        // 2íšŒì°¨
        println("2íšŒì°¨ ì‹œì‘:");
        apply X to q1;
        apply X to q3;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to q1;
        apply X to q3;
        apply H to ~;
        apply X to ~;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to ~;
        apply H to ~;
        println("2íšŒì°¨ ì™„ë£Œ");
        
        // 3íšŒì°¨
        println("3íšŒì°¨ ì‹œì‘:");
        apply X to q1;
        apply X to q3;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to q1;
        apply X to q3;
        apply H to ~;
        apply X to ~;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to ~;
        apply H to ~;
        println("3íšŒì°¨ ì™„ë£Œ");
        
        // 4íšŒì°¨
        println("4íšŒì°¨ ì‹œì‘:");
        apply X to q1;
        apply X to q3;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to q1;
        apply X to q3;
        apply H to ~;
        apply X to ~;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to ~;
        apply H to ~;
        println("4íšŒì°¨ ì™„ë£Œ");
        
        println("ğŸ‰ 4íšŒ Grover ë°˜ë³µ ì™„ë£Œ!");
    }
    return GroverNoLoop(5);
}

fn main() {
    println("ğŸ¯ ë£¨í”„ ì—†ëŠ” Grover í…ŒìŠ¤íŠ¸");
    println("=========================");
    
    grover_circuit = create_grover_no_loop();
    result = measure(grover_circuit, [0, 1, 2, 3, 4]);
    decimal_value = result[0] + result[1]*2 + result[2]*4 + result[3]*8 + result[4]*16;
    
    println("");
    println("ğŸ“Š ìµœì¢… ê²°ê³¼:");
    if (decimal_value == 21) {  // |10101âŸ©
        println("ğŸ‰ ì„±ê³µ! |10101âŸ© ìƒíƒœ ë°œê²¬");
        println("ë²”ìœ„ ë¬¸ë²• + 4íšŒ ë°˜ë³µìœ¼ë¡œ 85% ì„±ê³µë¥  ë‹¬ì„±!");
    } else {
        println("ğŸ”„ ë‹¤ë¥¸ ìƒíƒœ ì¸¡ì •ë¨: {}", decimal_value);
        println("ì¶”ê°€ ë¶„ì„ í•„ìš”");
    }
}