// algorithms/search/grover_debug_simple.qb
// ê°„ë‹¨í•œ Grover ë””ë²„ê¹… ë²„ì „

fn create_simple_grover() {
    circuit SimpleGrover(5) {
        println("ğŸ”§ ê°„ë‹¨í•œ Grover ë””ë²„ê¹…");
        println("=======================");
        
        // ì´ˆê¸°í™”: ëª¨ë“  íë¹—ì— H
        apply H to ~;
        println("1ï¸âƒ£ ì´ˆê¸°í™” ì™„ë£Œ");
        
        // Oracle ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸
        println("2ï¸âƒ£ Oracle í…ŒìŠ¤íŠ¸:");
        apply X to q1;
        println("  - X to q1 ì™„ë£Œ");
        
        apply X to q3;
        println("  - X to q3 ì™„ë£Œ");
        
        apply CZ to (q0, q1, q2, q3, q4);
        println("  - 5íë¹— CZ ì™„ë£Œ");
        
        apply X to q1;
        apply X to q3;
        println("  - Oracle ë³µì› ì™„ë£Œ");
        
        // Diffusion ë‹¨ê³„ë³„ í…ŒìŠ¤íŠ¸
        println("3ï¸âƒ£ Diffusion í…ŒìŠ¤íŠ¸:");
        apply H to ~;
        println("  - H to ~ ì™„ë£Œ");
        
        apply X to ~;
        println("  - X to ~ ì™„ë£Œ");
        
        apply CZ to (q0, q1, q2, q3, q4);
        println("  - CZ ì™„ë£Œ");
        
        apply X to ~;
        println("  - X ë³µì› ì™„ë£Œ");
        
        apply H to ~;
        println("  - H ë³µì› ì™„ë£Œ");
        
        println("4ï¸âƒ£ 1íšŒ Grover ë°˜ë³µ ì™„ë£Œ");
    }
    return SimpleGrover(5);
}

fn main() {
    println("ğŸ¯ ê°„ë‹¨í•œ Grover ë””ë²„ê¹…");
    println("=======================");
    
    grover_circuit = create_simple_grover();
    result = measure(grover_circuit, [0, 1, 2, 3, 4]);
    decimal_value = result[0] + result[1]*2 + result[2]*4 + result[3]*8 + result[4]*16;
    
    println("");
    println("ğŸ“Š ê²°ê³¼:");
    if (decimal_value == 21) {  // |10101âŸ©
        println("âœ… ì„±ê³µ! |10101âŸ© ìƒíƒœ ë°œê²¬");
    } else {
        println("ğŸ”„ ë‹¤ë¥¸ ìƒíƒœ: {}", decimal_value);
    }
    
    println("");
    println("ğŸ” ë¶„ì„:");
    println("â€¢ ëª¨ë“  ë‹¨ê³„ê°€ ì‹¤í–‰ë˜ì—ˆëŠ”ì§€ í™•ì¸");
    println("â€¢ ì—ëŸ¬ê°€ ë°œìƒí•œ ë‹¨ê³„ í™•ì¸");
}