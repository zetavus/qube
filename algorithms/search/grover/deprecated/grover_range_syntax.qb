// algorithms/search/grover_range_syntax.qb
// ë²”ìœ„ ë¬¸ë²•ìœ¼ë¡œ ê°œì„ ëœ 5íë¹— Grover ì•Œê³ ë¦¬ì¦˜ (ë‹¨ë… ~ ë²„ì „)

fn create_grover_with_range() {
    circuit GroverRange5Qubit(5) {
        println("ğŸš€ ë²”ìœ„ ë¬¸ë²•ìœ¼ë¡œ ê°œì„ ëœ Grover");
        println("==============================");
        
        // ì´ˆê¸°í™”: ëª¨ë“  íë¹—ì— H
        apply H to ~;
        println("1ï¸âƒ£ ì´ˆê¸°í™”: ëª¨ë“  íë¹—ì— H ì ìš©");
        
        // Grover ë°˜ë³µ 4íšŒ
        i = 0;
        while (i < 4) {
            println("{}íšŒì°¨ Grover ë°˜ë³µ:", i+1);
            
            // Oracle: |10101âŸ© íƒ€ê²Ÿ
            apply X to (q1, q3);          // íŠ¹ì • íë¹—ë“¤ flip
            apply CZ to (q0, q1, q2, q3, q4);  // 5íë¹— CZ (ëª…ì‹œì )
            apply X to (q1, q3);          // ë³µì›
            println("  - Oracle ì™„ë£Œ");
            
            // Diffusion
            apply H to ~;                 // ğŸš€ ëª¨ë“  íë¹—ì— H
            apply X to ~;                 // ğŸš€ ëª¨ë“  íë¹—ì— X
            apply CZ to (q0, q1, q2, q3, q4);  // 5íë¹— CZ
            apply X to ~;                 // ğŸš€ ë³µì›
            apply H to ~;                 // ğŸš€ ë³µì›
            println("  - Diffusion ì™„ë£Œ");
            
            i = i + 1;
        }
        
        println("2ï¸âƒ£ 4íšŒ Grover ë°˜ë³µ ì™„ë£Œ");
        println("ì˜ˆìƒ: |10101âŸ©ì´ 85% í™•ë¥ ");
    }
    return GroverRange5Qubit(5);
}

fn main() {
    println("ğŸ¯ ë²”ìœ„ ë¬¸ë²• ê°œì„  Grover í…ŒìŠ¤íŠ¸");
    println("===============================");
    
    // ë‹¨ì¼ ì‹¤í–‰
    grover_circuit = create_grover_with_range();
    result = measure(grover_circuit, [0, 1, 2, 3, 4]);
    decimal_value = result[0] + result[1]*2 + result[2]*4 + result[3]*8 + result[4]*16;
    
    println("");
    println("ğŸ“Š ë‹¨ì¼ ì‹¤í–‰ ê²°ê³¼:");
    if (decimal_value == 21) {  // |10101âŸ©
        println("âœ… ì„±ê³µ! |10101âŸ© ìƒíƒœ ë°œê²¬");
    } else {
        println("ğŸ”„ ë‹¤ë¥¸ ìƒíƒœ ì¸¡ì •ë¨: {}", decimal_value);
    }
    
    println("");
    println("ğŸš€ ë²”ìœ„ ë¬¸ë²•ì˜ ì¥ì :");
    println("===================");
    println("â€¢ ê°„ê²°í•¨: apply H to ~ vs apply H to q0; apply H to q1; ...");
    println("â€¢ ê°€ë…ì„±: ì•Œê³ ë¦¬ì¦˜ ì˜ë„ê°€ ë” ëª…í™•íˆ ë“œëŸ¬ë‚¨");
    println("â€¢ ìœ ì§€ë³´ìˆ˜: íë¹— ìˆ˜ ë³€ê²½ì‹œ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”");
}