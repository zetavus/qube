// algorithms/search/simple_structured_test.qb
// ê¸°ë³¸ ë¬¸ë²• í™•ì¸: í•¨ìˆ˜ í˜¸ì¶œì´ ê°€ëŠ¥í•œì§€ í…ŒìŠ¤íŠ¸

fn oracle_function() {
    println("Oracle í•¨ìˆ˜ í˜¸ì¶œë¨");
    // ì‹¤ì œ Oracle ë¡œì§ì€ íšŒë¡œ ì™¸ë¶€ì—ì„œëŠ” ë¶ˆê°€ëŠ¥í•  ìˆ˜ ìˆìŒ
}

fn diffusion_function() {
    println("Diffusion í•¨ìˆ˜ í˜¸ì¶œë¨");
    // ì‹¤ì œ Diffusion ë¡œì§ì€ íšŒë¡œ ì™¸ë¶€ì—ì„œëŠ” ë¶ˆê°€ëŠ¥í•  ìˆ˜ ìˆìŒ
}

fn main() {
    println("ğŸ§ª í•¨ìˆ˜ í˜¸ì¶œ í…ŒìŠ¤íŠ¸");
    println("=================");
    
    // íšŒë¡œ ì™¸ë¶€ì—ì„œ í•¨ìˆ˜ í˜¸ì¶œ í…ŒìŠ¤íŠ¸
    oracle_function();
    diffusion_function();
    
    // ê¸°ë³¸ íšŒë¡œ í…ŒìŠ¤íŠ¸
    circuit SimpleTest(5) {
        println("íšŒë¡œ ë‚´ë¶€ì—ì„œ ì‹¤í–‰ë¨");
        
        // ì´ˆê¸°í™”
        apply H to ~;
        
        // Oracle (í•¨ìˆ˜ í˜¸ì¶œ ì—†ì´ ì§ì ‘ êµ¬í˜„)
        apply X to q1; apply X to q3;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to q1; apply X to q3;
        
        // Diffusion (í•¨ìˆ˜ í˜¸ì¶œ ì—†ì´ ì§ì ‘ êµ¬í˜„)
        apply H to ~; apply X to ~;
        apply CZ to (q0, q1, q2, q3, q4);
        apply X to ~; apply H to ~;
    }
    
    println("íšŒë¡œ ìƒì„± ì¤‘...");
    test_circuit = SimpleTest();
    
    println("ì¸¡ì • ì¤‘...");
    result = measure(test_circuit, [0, 1, 2, 3, 4]);
    
    decimal = result[0] + result[1]*2 + result[2]*4 + result[3]*8 + result[4]*16;
    println("ê²°ê³¼: {} (ì‹­ì§„ìˆ˜: {})", result, decimal);
    
    if (decimal == 21) {
        println("âœ… |10101âŸ© ì„±ê³µ!");
    } else {
        println("âŒ ë‹¤ë¥¸ ìƒíƒœ: {}", decimal);
    }
}