// ê°„ë‹¨í•œ 5íë¹— Grover í…ŒìŠ¤íŠ¸
// ì¸¡ì • ë¬¸ì œ í•´ê²° ë²„ì „

// 5íë¹— Grover ì•Œê³ ë¦¬ì¦˜ (4íšŒ ë°˜ë³µ)
fn create_5qubit_grover() {
    circuit Grover5Q(5) {
        // 1. ì´ˆê¸°í™”: ê· ë“± ì¤‘ì²©
        apply H to q0;
        apply H to q1;
        apply H to q2;
        apply H to q3;
        apply H to q4;
        
        // 2. Grover ë°˜ë³µ 4íšŒ
        // ëª©í‘œ: |10101âŸ© (q4=1, q3=0, q2=1, q1=0, q0=1)
        
        // === 1ë²ˆì§¸ ë°˜ë³µ ===
        // Oracle: |10101âŸ©ì— ìœ„ìƒ ë’¤ì§‘ê¸°
        apply X to q3;  // 0 â†’ 1
        apply X to q1;  // 0 â†’ 1
        apply CZ to (q4, q3, q2, q1, q0);  // 5íë¹— ì œì–´ Z
        apply X to q3;  // 1 â†’ 0 ë³µì›
        apply X to q1;  // 1 â†’ 0 ë³µì›
        
        // Diffusion: í‰ê·  ì¤‘ì‹¬ ë°˜ì‚¬
        apply H to q0; apply H to q1; apply H to q2; apply H to q3; apply H to q4;
        apply X to q0; apply X to q1; apply X to q2; apply X to q3; apply X to q4;
        apply CZ to (q4, q3, q2, q1, q0);
        apply X to q0; apply X to q1; apply X to q2; apply X to q3; apply X to q4;
        apply H to q0; apply H to q1; apply H to q2; apply H to q3; apply H to q4;
        
        // === 2ë²ˆì§¸ ë°˜ë³µ ===
        apply X to q3; apply X to q1;
        apply CZ to (q4, q3, q2, q1, q0);
        apply X to q3; apply X to q1;
        
        apply H to q0; apply H to q1; apply H to q2; apply H to q3; apply H to q4;
        apply X to q0; apply X to q1; apply X to q2; apply X to q3; apply X to q4;
        apply CZ to (q4, q3, q2, q1, q0);
        apply X to q0; apply X to q1; apply X to q2; apply X to q3; apply X to q4;
        apply H to q0; apply H to q1; apply H to q2; apply H to q3; apply H to q4;
        
        // === 3ë²ˆì§¸ ë°˜ë³µ ===
        apply X to q3; apply X to q1;
        apply CZ to (q4, q3, q2, q1, q0);
        apply X to q3; apply X to q1;
        
        apply H to q0; apply H to q1; apply H to q2; apply H to q3; apply H to q4;
        apply X to q0; apply X to q1; apply X to q2; apply X to q3; apply X to q4;
        apply CZ to (q4, q3, q2, q1, q0);
        apply X to q0; apply X to q1; apply X to q2; apply X to q3; apply X to q4;
        apply H to q0; apply H to q1; apply H to q2; apply H to q3; apply H to q4;
        
        // === 4ë²ˆì§¸ ë°˜ë³µ ===
        apply X to q3; apply X to q1;
        apply CZ to (q4, q3, q2, q1, q0);
        apply X to q3; apply X to q1;
        
        apply H to q0; apply H to q1; apply H to q2; apply H to q3; apply H to q4;
        apply X to q0; apply X to q1; apply X to q2; apply X to q3; apply X to q4;
        apply CZ to (q4, q3, q2, q1, q0);
        apply X to q0; apply X to q1; apply X to q2; apply X to q3; apply X to q4;
        apply H to q0; apply H to q1; apply H to q2; apply H to q3; apply H to q4;
    }
    
    return Grover5Q(5);
}

fn main() {
    println("ğŸš€ 5íë¹— Grover ê²€ìƒ‰ ì•Œê³ ë¦¬ì¦˜ (ê°„ë‹¨ ë²„ì „)");
    println("=========================================");
    println("ëª©í‘œ: |10101âŸ© ìƒíƒœ ì°¾ê¸° (ì‹­ì§„ìˆ˜: 21)");
    println("ê²€ìƒ‰ ê³µê°„: 32ê°œ ìƒíƒœ");
    println("ê³ ì „ì  í™•ë¥ : 3.125%");
    println("ëª©í‘œ ì„±ê³µë¥ : ~85%");
    println("");
    
    println("ğŸ§ª ì²« ë²ˆì§¸ ì‹¤í–‰:");
    println("----------------");
    grover = create_5qubit_grover();
    result1 = grover.measure();
    
    // ê²°ê³¼ ë¶„ì„
    decimal1 = result1[0] + result1[1]*2 + result1[2]*4 + result1[3]*8 + result1[4]*16;
    
    println("ì¸¡ì • ê²°ê³¼ 1:");
    if (result1[4] == 1 && result1[3] == 0 && result1[2] == 1 && result1[1] == 0 && result1[0] == 1) {
        println("âœ… ì„±ê³µ! |10101âŸ© ìƒíƒœ ë°œê²¬");
    } else {
        println("ğŸ”„ ë‹¤ë¥¸ ìƒíƒœ ì¸¡ì •ë¨");
    }
    
    println("");
    println("ğŸ§ª ë‘ ë²ˆì§¸ ì‹¤í–‰:");
    println("----------------");
    grover2 = create_5qubit_grover();
    result2 = grover2.measure();
    
    decimal2 = result2[0] + result2[1]*2 + result2[2]*4 + result2[3]*8 + result2[4]*16;
    
    println("ì¸¡ì • ê²°ê³¼ 2:");
    if (result2[4] == 1 && result2[3] == 0 && result2[2] == 1 && result2[1] == 0 && result2[0] == 1) {
        println("âœ… ì„±ê³µ! |10101âŸ© ìƒíƒœ ë°œê²¬");
    } else {
        println("ğŸ”„ ë‹¤ë¥¸ ìƒíƒœ ì¸¡ì •ë¨");
    }
    
    println("");
    println("ğŸ§ª ì„¸ ë²ˆì§¸ ì‹¤í–‰:");
    println("----------------");
    grover3 = create_5qubit_grover();
    result3 = grover3.measure();
    
    decimal3 = result3[0] + result3[1]*2 + result3[2]*4 + result3[3]*8 + result3[4]*16;
    
    println("ì¸¡ì • ê²°ê³¼ 3:");
    if (result3[4] == 1 && result3[3] == 0 && result3[2] == 1 && result3[1] == 0 && result3[0] == 1) {
        println("âœ… ì„±ê³µ! |10101âŸ© ìƒíƒœ ë°œê²¬");
    } else {
        println("ğŸ”„ ë‹¤ë¥¸ ìƒíƒœ ì¸¡ì •ë¨");
    }
    
    println("");
    println("ğŸ¯ í•µì‹¬ í™•ì¸ì‚¬í•­:");
    println("- ìŠ¤ë§ˆíŠ¸ CZ ê²Œì´íŠ¸ ì‘ë™ ì—¬ë¶€");
    println("- 5íë¹— ì œì–´ Z ê²Œì´íŠ¸ ì •ìƒ ë™ì‘");
    println("- Grover ì•Œê³ ë¦¬ì¦˜ í™•ë¥  ì¦í­ íš¨ê³¼");
    
    if (decimal1 == 21 || decimal2 == 21 || decimal3 == 21) {
        println("");
        println("ğŸ‰ 5íë¹— Grover ì•Œê³ ë¦¬ì¦˜ ì‘ë™ í™•ì¸!");
        println("ğŸ’ª ìŠ¤ë§ˆíŠ¸ CZ ê²Œì´íŠ¸ ì„±ê³µì ìœ¼ë¡œ êµ¬í˜„ë¨!");
        println("ğŸš€ ì´ì œ 6íë¹—, 7íë¹—, 8íë¹—ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥!");
    } else {
        println("");
        println("ğŸ”§ ì•Œê³ ë¦¬ì¦˜ ë””ë²„ê¹… í•„ìš”");
        println("í™•ë¥ ì´ ë†’ì•„ì¡ŒëŠ”ì§€ ì¶”ê°€ í…ŒìŠ¤íŠ¸ í•„ìš”");
    }
}