// working_protected_test.qyt
// ê¸°ì¡´ ë°©ì‹ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•´ì„œ Protected í…ŒìŠ¤íŠ¸

class BankAccount {
    protected balance: f64;    // Protectedë¡œ ë³€ê²½!
    public name: str;
    
    public fn init(self, initial_balance) {
        self.balance = initial_balance;
        println("âœ… Account initialized with balance: {}", self.balance);
    }
    
    public fn deposit(self, amount) {
        self.balance = self.balance + amount;
        println("âœ… Deposited {}. New balance: {}", amount, self.balance);
    }
    
    protected fn validate(self) {    // Protected ë©”ì„œë“œ
        return self.balance >= 0;
    }
    
    public fn get_balance(self) {
        if (self.validate()) {
            return self.balance;
        }
        return 0;
    }
}

class SavingsAccount extends BankAccount {
    public interest_rate: f64;
    
    public fn new_savings(self, name: str, balance: f64, rate: f64) {
        self.name = name;
        self.balance = balance;      // âœ… Protected í•„ë“œ ì ‘ê·¼ (ìƒì†)
        self.interest_rate = rate;
    }
    
    public fn add_interest(self) {
        if (self.validate()) {       // âœ… Protected ë©”ì„œë“œ í˜¸ì¶œ (ìƒì†)
            interest = self.balance * self.interest_rate;
            self.balance = self.balance + interest;
            println("âœ… Interest added: {}. New balance: {}", interest, self.balance);
        }
    }
}

fn main() {
    println("ğŸ¯ QyTum Protected ì ‘ê·¼ ì œì–´ì í…ŒìŠ¤íŠ¸");
    println("==================================");
    
    // ê¸°ë³¸ ê³„ì¢Œ ìƒì„± (ê¸°ì¡´ ë°©ì‹)
    account = BankAccount { name: "John Doe" };
    println("âœ… Account created for: {}", account.name);
    
    account.init(1000.0);
    account.deposit(500.0);
    
    println("==================================");
    println("ğŸ”’ Protected ì ‘ê·¼ í…ŒìŠ¤íŠ¸");
    
    // âŒ Protected í•„ë“œ ì™¸ë¶€ ì ‘ê·¼ ì‹œë„ (ì—ëŸ¬ ë°œìƒí•´ì•¼ í•¨)
    println("Trying to access protected balance...");
    println("Balance: {}", account.balance);
}